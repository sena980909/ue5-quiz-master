[UE5 심화] 제16강: 외부 세계와의 소통 (HTTP 통신과 JSON)
1. 게임 클라이언트와 웹 서버의 관계
14강의 '데디케이티드 서버(TCP/UDP)'는 실시간 위치 동기화를 위한 것이고, HTTP 통신은 영구적인 데이터 저장을 위해 웹 서버(API Server)와 대화하는 것입니다.

• 용도: 로그인, 회원가입, 랭킹(Leaderboard), 우편함, 공지사항.

• 구조:

  • UE5 (Client): HTTP Request (GET/POST) 전송.

  • Spring Boot (Server): DB 조회 후 JSON Response 반환.

• 백엔드 비유: UE5를 React/Vue 프론트엔드나 Postman이라고 생각하면 됩니다.

2. 필수 모듈 설정 (Build.cs)
언리얼에서 HTTP를 쓰려면 기본적으로 꺼져 있는 기능을 켜야 합니다.

• 파일: `ProjectName.Build.cs`

• 설정:

```

// "HTTP", "Json", "JsonUtilities" 모듈 추가

PublicDependencyModuleNames.AddRange(new string[] { 

    "Core", "CoreUObject", "Engine", "InputCore", 

    "HTTP", "Json", "JsonUtilities" // <- 필수!

});

```

• 의미: `build.gradle`에 `implementation 'org.springframework.boot:spring-boot-starter-web'`을 추가하는 것과 같습니다.

3. HTTP 요청 객체 (FHttpRequest)
C++에서 요청을 만드는 과정입니다. Java의 `RestTemplate`이나 `WebClient`와 유사합니다.

1. 생성: `FHttpModule::Get().CreateRequest()`

2. 메서드: `SetVerb("POST")`

3. 헤더: `SetHeader("Content-Type", "application/json")`

4. 바디: `SetContentAsString(JsonString)`

5. 발송: `ProcessRequest()`

4. 비동기 응답 처리 (Delegate)
네트워크 요청은 언제 끝날지 모릅니다. 절대 메인 스레드(Game Thread)를 멈추면 안 되므로 콜백(Callback) 방식을 씁니다.

• 바인딩: `OnProcessRequestComplete().BindUObject(this, &MyClass::OnResponseReceived)`

• 핸들러 함수:

```

void OnResponseReceived(FHttpRequestPtr Request, FHttpResponsePtr Response, bool bWasSuccessful)

{

    if (bWasSuccessful && Response->GetResponseCode() == 200)

    {

        // 성공! JSON 파싱 시작

        FString ResponseBody = Response->GetContentAsString();

    }

}

```

• 백엔드 비유: JavaScript의 `fetch().then(response => ...)` 또는 Java의 `CompletableFuture`.

5. JSON 파싱 (Serialization/Deserialization)
서버가 준 문자열(String)을 C++ 객체(Struct)로 변환하거나 그 반대로 하는 작업입니다.

• TJsonWriter: C++ 구조체 -> JSON 문자열 (Serialize).

• TJsonReader: JSON 문자열 -> C++ 구조체 (Deserialize).

• FJsonObjectConverter: 가장 편한 도구.

  • `FJsonObjectConverter::JsonObjectStringToUStruct<FMyDTO>(String, &MyStruct)`

  • 한 방에 매핑해 줍니다. (Spring의 `Jackson` 라이브러리와 동일)

6. 요약
1. Module: `HTTP`, `Json` 모듈을 Build.cs에 추가해야 한다.

2. Async: 요청을 보내고(ProcessRequest), 델리게이트로 응답을 받는다(OnComplete).

3. JSON: `FJsonObjectConverter`를 쓰면 Jackson처럼 편하게 DTO 변환이 가능하다.

4. 활용: 이 기능을 이용해 Project Arcana의 '랭킹 시스템'을 명준님의 Spring 서버에 붙일 수 있습니다.
