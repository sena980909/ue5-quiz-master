[UE5 이론] 제2강: C++ 클래스 구조와 조립 (생성자의 역할)
1. 헤더 파일(.h) vs 소스 파일(.cpp): 설계도와 시공
언리얼 C++은 두 개의 파일로 나뉩니다. 백엔드 개발에 비유하면 이해가 쉽습니다.

• 헤더 파일 (.h): 인터페이스(Interface) 또는 DTO 정의서.

  • "이 액터는 이런 부품(변수)과 기능(함수)을 가질 거야"라고 선언만 합니다.

  • 실제 작동 코드는 없습니다. 목록만 적혀 있습니다.

• 소스 파일 (.cpp): 서비스(Service) 구현체.

  • 헤더에 적힌 내용이 실제로 어떻게 작동하는지 구현합니다.

2. 리플렉션 시스템: UPROPERTY 매크로
헤더 파일에서 변수를 선언할 때 `UPROPERTY(...)`라는 매크로를 붙입니다.

• 개념: Java Spring의 **어노테이션(`@Autowired`, `@Column`)**과 똑같습니다.

• 역할:

  1. 가비지 컬렉션(GC): 엔진이 이 변수를 추적하여 메모리에서 함부로 삭제되지 않게 보호합니다.

  2. 에디터 노출: 이 변수를 언리얼 에디터(UI)에서 보이게 하거나 수정할 수 있게 합니다.

• 원리: C++ 언어 자체에는 리플렉션(런타임에 객체 정보를 아는 기능)이 없어서, 언리얼이 매크로로 강제 주입하는 것입니다.

3. 생성자 (Constructor): 조립 라인
소스 파일(.cpp)의 생성자는 이 액터가 태어나는 순간(메모리에 올라갈 때) 딱 한 번 실행됩니다. 여기서 컴포넌트 조립이 일어납니다.

A. 부품 구매 (메모리 할당)

• 코드: `CreateDefaultSubobject(TEXT("Name"))`

• 의미: "운영체제야, 이 컴포넌트 크기만큼 메모리 좀 줘." (`new` 키워드와 비슷하지만 엔진이 관리함)

• 비유: PC 조립할 때 CPU, RAM, 그래픽카드 박스를 뜯는 과정입니다.

B. 부품 용접 (계층 연결)

• 코드: `SetupAttachment(ParentComponent)`

• 의미: "이 부품을 저 부품 밑에 붙여."

• 비유: 뜯은 CPU를 메인보드에 끼우고, 쿨러를 CPU 위에 다는 과정입니다.

• 중요: 1강에서 배운 루트 컴포넌트가 메인보드 역할을 합니다.

4. 전체적인 흐름 (Flow)
1. 설계 (.h): "나는 '몸통'과 '머리'가 있는 로봇을 만들겠다." (`UPROPERTY` 선언)

2. 조립 (.cpp 생성자):

  • 몸통 부품 박스 뜯기 (`CreateDefaultSubobject`)

  • 머리 부품 박스 뜯기 (`CreateDefaultSubobject`)

  • 몸통을 기준점으로 잡기 (`RootComponent = Body`)

  • 머리를 몸통 위에 붙이기 (`Head->SetupAttachment(Body)`)

---