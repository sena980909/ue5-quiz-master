[UE5 이론] 제4강: 충돌(Collision) 시스템의 물리적/논리적 구조
1. 충돌 채널 (Collision Channel): "신분증과 필터링"
언리얼 엔진의 물리 엔진(Chaos Physics)은 수천 개의 객체를 실시간으로 계산해야 합니다. 모든 객체가 서로 검사하면 성능이 폭발합니다. 그래서 **채널(Channel)**을 씁니다.

• Object Type (내 신분): "나는 누구인가?" (예: WorldStatic, Pawn, Enemy).

  • 백엔드 비유: User Role (Admin, User, Guest).

• Collision Response (반응 설정): "나는 누구와 상호작용할 것인가?"

  • 백엔드 비유: Firewall Rule 또는 ACL (Access Control List).

  • 예: "Pawn(캐릭터)은 WorldStatic(벽)을 막고(Block), Trigger(함정)는 통과하되 기록(Overlap)해라."

2. 상호작용 매트릭스: 3가지 반응 (Interaction Matrix)
두 물체 A와 B가 만났을 때, 둘 중 더 보수적인(약한) 설정이 적용되는 경우가 많지만, 기본적으로는 각자의 설정에 따라 반응합니다.

A. Ignore (무시)

• 현상: 유령처럼 통과합니다. 물리 연산도, 이벤트도 발생하지 않습니다.

• 비유: /dev/null. 패킷 드랍. 성능 비용이 0에 가깝습니다.

B. Overlap (겹침)

• 현상: 통과하지만, **"들어왔다(Begin)"**와 **"나갔다(End)"**는 이벤트를 감지합니다.

• 비유: Logging / Monitoring. 트래픽은 허용하되, 로그를 남겨서 트리거를 발동시킵니다. (자동문, 아이템 획득, 데미지 장판)

C. Block (차단)

• 현상: 물리적으로 통과하지 못하게 막습니다. 튕겨 나가거나 멈춥니다.

• 비유: Deny / Reject. 물리 엔진이 강제로 위치를 수정(Correction)하여 밀어냅니다. (벽, 바닥)

3. Query vs Physics: 연산의 종류
충돌 옵션에 `Query and Physics`라는 말이 자주 나옵니다. 이 둘은 다릅니다.

• Query (질의): "지금 내 앞에 누가 있어?" (Raycast, Overlap Check).

  • 논리적 계산입니다. 게임 로직(공격 판정, 시야 체크)에 쓰입니다.

  • 백엔드 비유: Spatial Index Search (DB에서 거리 계산).

• Physics (물리): "부딪혔으니 튕겨 나가야지." (Simulation).

  • 물리적 시뮬레이션입니다. 중력, 마찰력, 탄성을 계산합니다.

  • 백엔드 비유: Complex Simulation Engine. 비용이 훨씬 비쌉니다.

• 최적화 팁: 움직이지 않는 배경(벽)은 Physics를 끄고 Query만 켜는 것이 정석입니다.

4. 이벤트 시스템 (Event-Driven Architecture)
충돌이 발생했을 때 코드는 어떻게 알까요? 역시 옵저버 패턴입니다.

• 델리게이트 (Delegate): `OnComponentBeginOverlap`

• 작동 원리:

  1. 물리 엔진이 `Tick` 중에 두 물체의 겹침을 감지.

  2. 엔진: "야, 너네 겹쳤어." -> 등록된 함수(핸들러)들에게 브로드캐스트(Broadcast).

  3. OnOverlapBegin 함수 실행 (여기서 HP를 깎거나 로그를 찍음).

• 비유: Webhook 또는 Message Queue Consumer. 특정 조건(충돌)이 만족되면 비동기적으로 로직을 트리거합니다.

5. 요약
1. Channel: 객체의 신분(Role)과 필터(ACL).

2. Overlap: 통과 + 이벤트 (로그/트리거).

3. Block: 차단 + 물리 반작용 (벽).

4. Query: 논리적 검사 (가볍다).

5. Physics: 물리 시뮬레이션 (무겁다).
