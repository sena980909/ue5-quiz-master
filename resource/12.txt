[UE5 이론] 제12강: 게임 루프의 완성 (GameMode와 UI 연동)
1. 게임모드 (GameMode): 절대적인 심판자
캐릭터가 죽거나 적을 다 잡았을 때, 누가 "게임 끝!"을 외칠까요? 캐릭터 스스로가 아닙니다.

• AGameModeBase: 게임의 규칙(Rule)과 흐름(Flow)을 총괄하는 클래스입니다.

• 역할:

  • 게임 시작 시 어떤 캐릭터(Pawn)를 스폰할지 결정.

  • 점수 계산, 승패 판정, 레벨 재시작 관리.

• 백엔드 비유: Main Controller 또는 Session Manager.

  • 개별 유저(Pawn)의 상태를 모니터링하다가, 세션 종료 조건이 되면 게임을 닫습니다.

2. 승패 로직의 중앙 집권화
초보자는 "플레이어가 죽으면 플레이어 코드 안에서 게임 오버 UI를 띄운다"라고 짭니다. (나쁜 설계) GameMode가 모든 생사여탈권을 쥐어야 합니다.

• 패배 조건: 플레이어 HP <= 0.

• 승리 조건: 맵에 남은 적 수 == 0 (또는 보스 사망).

• 올바른 흐름:

  1. Player: "윽, 나 죽음." -> `GameMode->ProcessPlayerDeath()` 호출.

  2. GameMode: "플레이어 사망 확인. 게임 오버 절차 시작."

3. UI 모드 변경 (Input Mode)
평소에는 마우스로 시점을 돌려야 해서 커서가 안 보입니다(Game Only). 하지만 게임 오버가 되면 마우스로 '재시작' 버튼을 눌러야 합니다(UI Only).

• SetInputMode:

  • `FInputModeGameOnly`: 평상시 (커서 숨김, 마우스로 화면 회전).

  • `FInputModeUIOnly`: 메뉴 화면 (커서 보임, 캐릭터 조작 불가).

• SetGamePaused: 게임 내 시간을 멈춥니다. (Tick이 돌지 않음)

4. 게임 오버 시퀀스 (Sequence)
백엔드 로직처럼 순서가 중요합니다.

1. Event: 플레이어 사망 델리게이트 수신.

2. Pause: `UGameplayStatics::SetGamePaused(true)` (모든 동작 정지).

3. Widget: `CreateWidget(WBP_GameOver)` -> `AddToViewport()` (화면에 띄움).

4. Cursor: `PlayerController->bShowMouseCursor = true`.

5. Input: `SetInputMode(FInputModeUIOnly)`.

5. 레벨 재시작 (Reset)
게임을 다시 시작하는 가장 확실한 방법은 메모리를 비우고 새로 로드하는 것입니다.

• OpenLevel: `UGameplayStatics::OpenLevel(GetWorld(), "CurrentLevelName")`.

• 비유: 브라우저 새로고침(F5). 모든 상태 변수(HP, 위치, 점수)가 초기화됩니다.

6. 요약
1. GameMode: 규칙과 승패를 관리하는 심판. (개별 액터에 로직 분산 금지)

2. Input Mode: 게임 플레이 중에는 `GameOnly`, 메뉴에서는 `UIOnly`.

3. Restart: 가장 깔끔한 초기화는 `OpenLevel`로 레벨을 다시 여는 것.

---
